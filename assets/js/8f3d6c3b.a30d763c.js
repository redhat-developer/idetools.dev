"use strict";(self.webpackChunkidetools_dev=self.webpackChunkidetools_dev||[]).push([[8574],{6099:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>n,metadata:()=>l,toc:()=>d});var o=i(4848),s=i(8453);const n={slug:"dynamic-proposals",title:"Supporting dynamic code actions in VS Code Java",authors:["hopehadfield"],tags:["vscode","java","snippet","code actions"]},a=void 0,l={permalink:"/blog/dynamic-proposals",source:"@site/blog/2024-09-06-dynamic-proposals.md",title:"Supporting dynamic code actions in VS Code Java",description:"I'm definitely not the first developer to say that quick fix suggestions make my life ten times easier. With dynamic proposals for code actions, my life gets even easier.",date:"2024-09-06T00:00:00.000Z",tags:[{label:"vscode",permalink:"/blog/tags/vscode"},{label:"java",permalink:"/blog/tags/java"},{label:"snippet",permalink:"/blog/tags/snippet"},{label:"code actions",permalink:"/blog/tags/code-actions"}],readingTime:1.9,hasTruncateMarker:!1,authors:[{name:"Hope Hadfield",title:"Intern @ Red Hat",url:"https://github.com/hopehadfield",imageURL:"https://github.com/hopehadfield.png",key:"hopehadfield"}],frontMatter:{slug:"dynamic-proposals",title:"Supporting dynamic code actions in VS Code Java",authors:["hopehadfield"],tags:["vscode","java","snippet","code actions"]},unlisted:!1,nextItem:{title:"Dropping support of older Java releases in vscode-java",permalink:"/blog/java-1_8-compliance"}},c={authorsImageUrls:[void 0]},d=[{value:"The Point",id:"the-point",level:2},{value:"Limitations",id:"limitations",level:2}];function r(e){const t={a:"a",code:"code",h2:"h2",img:"img",p:"p",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"I'm definitely not the first developer to say that quick fix suggestions make my life ten times easier. With dynamic proposals for code actions, my life gets even easier."}),"\n",(0,o.jsx)(t.p,{children:"Many quick fixes have multiple suggestions for text replacement. In the Eclipse IDE, these are displayed in a dropdown selection menu. Take a look at the type mismatch quick fix below, for example:"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Example of linked proposal in Eclipse",src:i(6706).A+"",width:"501",height:"199"})}),"\n",(0,o.jsx)(t.p,{children:"Very helpful, right? Now let's take a look at how VS Code handles the same quick fix:"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Example of old proposal in VS Code",src:i(6737).A+"",width:"687",height:"200"})}),"\n",(0,o.jsx)(t.p,{children:"No dropdown, no options, just the first item from Eclipse's list inserted statically. Definitely less helpful."}),"\n",(0,o.jsxs)(t.p,{children:["Why is this? Well, code actions in Eclipse support dropdown choices, as well as placeholders, which enable dynamic text insertion/replacement. Code actions in VS Code, on the other hand, do not. The closest we can get to simulating this behaviour in VS Code is by using snippets, which similarly have choices/placeholders. Unfortunately, we couldn't support snippet strings in code actions without violating the ",(0,o.jsx)(t.a,{href:"https://microsoft.github.io/language-server-protocol/",children:"Language Server Protocol"})," specification... until now!"]}),"\n",(0,o.jsxs)(t.p,{children:["With the introduction and support of SnippetTextEdit in ",(0,o.jsx)(t.a,{href:"https://microsoft.github.io/language-server-protocol/specifications/lsp/3.18/specification/#snippetTextEdit",children:"LSP"})," and ",(0,o.jsx)(t.a,{href:"https://code.visualstudio.com/api/references/vscode-api#SnippetTextEdit",children:"VS Code"}),", dynamic code actions will now be supported in the upcoming release of vscode-java 1.35.0! If you can't wait, they're also available now in pre-release."]}),"\n",(0,o.jsxs)(t.p,{children:["Check out the relevant ",(0,o.jsx)(t.a,{href:"https://github.com/redhat-developer/vscode-java/pull/3730",children:"PR"})," in ",(0,o.jsx)(t.a,{href:"https://github.com/redhat-developer/vscode-java",children:"vscode-java"})," and its supporting ",(0,o.jsx)(t.a,{href:"https://github.com/eclipse-jdtls/eclipse.jdt.ls/pull/3229",children:"PR"})," in ",(0,o.jsx)(t.a,{href:"https://github.com/eclipse-jdtls/eclipse.jdt.ls",children:"JDT-LS"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"the-point",children:"The Point"}),"\n",(0,o.jsx)(t.p,{children:"Code actions, which were once completely static, now prompt you to alter relevant sections of text and give you multiple suggestions for insertion and replacement."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Example of dynamic proposal in VS Code",src:i(4725).A+"",width:"1234",height:"449"})}),"\n",(0,o.jsx)(t.p,{children:"Pretty cool."}),"\n",(0,o.jsx)(t.h2,{id:"limitations",children:"Limitations"}),"\n",(0,o.jsx)(t.p,{children:"This improvement doesn't come without a few minor setbacks."}),"\n",(0,o.jsxs)(t.p,{children:["For code actions that propose new types, the import for the selected type cannot be automatically resolved. Instead, after applying the code action and selecting the new type from the dropdown, the user has to either manually import the type, apply the subsequent quick fix suggestion to import the type, or issue the 'Organize Imports' command (",(0,o.jsx)(t.code,{children:"Shift"})," + ",(0,o.jsx)(t.code,{children:"Alt"})," + ",(0,o.jsx)(t.code,{children:"O"}),")."]}),"\n",(0,o.jsxs)(t.p,{children:["Additionally, any code action that involves multi-line text insertion will see additional indentation on all lines excluding the first one. You can see this happen in the above example. This is due to a ",(0,o.jsx)(t.a,{href:"https://github.com/microsoft/vscode/issues/63129",children:"bug"})," in VS Code that automatically adds indentation to snippet strings."]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(r,{...e})}):r(e)}},4725:(e,t,i)=>{i.d(t,{A:()=>o});const o=i.p+"assets/images/dynamic-proposal-vscode-e6885afa991bc07f7b89c785c0d30dec.gif"},6706:(e,t,i)=>{i.d(t,{A:()=>o});const o=i.p+"assets/images/linked-proposal-eclipse-af0e7b6cfa9c041b8f66724029f6e4a8.gif"},6737:(e,t,i)=>{i.d(t,{A:()=>o});const o=i.p+"assets/images/old-vscode-proposal-7c6e83ca2ad8f9e1aa5274eec8e4dc95.gif"},8453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>l});var o=i(6540);const s={},n=o.createContext(s);function a(e){const t=o.useContext(n);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(n.Provider,{value:t},e.children)}}}]);