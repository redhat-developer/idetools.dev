<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Meet LSP4IJ, a new LSP Client for JetBrains-based IDEs | Red Hat IDE Extensions</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://idetools.dev/img/temp-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://idetools.dev/img/temp-social-card.jpg"><meta data-rh="true" property="og:url" content="https://idetools.dev/blog/lsp4ij-announcement/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Meet LSP4IJ, a new LSP Client for JetBrains-based IDEs | Red Hat IDE Extensions"><meta data-rh="true" name="description" content="LSP4IJ is a new, free and open-source Language Server Protocol (LSP) client for JetBrains-based IDEs, compatible with both community and enterprise flavors."><meta data-rh="true" property="og:description" content="LSP4IJ is a new, free and open-source Language Server Protocol (LSP) client for JetBrains-based IDEs, compatible with both community and enterprise flavors."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-06-20T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/angelozerr,https://github.com/fbricon"><meta data-rh="true" property="article:tag" content="lsp,intellij,lsp4ij"><link data-rh="true" rel="icon" href="/img/rhd-tab.png"><link data-rh="true" rel="canonical" href="https://idetools.dev/blog/lsp4ij-announcement/"><link data-rh="true" rel="alternate" href="https://idetools.dev/blog/lsp4ij-announcement/" hreflang="en"><link data-rh="true" rel="alternate" href="https://idetools.dev/blog/lsp4ij-announcement/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://idetools.dev/blog/lsp4ij-announcement","mainEntityOfPage":"https://idetools.dev/blog/lsp4ij-announcement","url":"https://idetools.dev/blog/lsp4ij-announcement","headline":"Meet LSP4IJ, a new LSP Client for JetBrains-based IDEs","name":"Meet LSP4IJ, a new LSP Client for JetBrains-based IDEs","description":"LSP4IJ is a new, free and open-source Language Server Protocol (LSP) client for JetBrains-based IDEs, compatible with both community and enterprise flavors.","datePublished":"2024-06-20T00:00:00.000Z","author":[{"@type":"Person","name":"Angelo Zerr","description":"Principal Software Engineer @ Red Hat","url":"https://github.com/angelozerr","image":"https://github.com/angelozerr.png"},{"@type":"Person","name":"Fred Bricon","description":"Principal Software Engineer @ Red Hat","url":"https://github.com/fbricon","image":"https://github.com/fbricon.png"}],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://idetools.dev/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Red Hat IDE Extensions RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Red Hat IDE Extensions Atom Feed"><link rel="stylesheet" href="/assets/css/styles.0f72e116.css">
<script src="/assets/js/runtime~main.c882b903.js" defer="defer"></script>
<script src="/assets/js/main.aa32932a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/RHD-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/RHD-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Red Hat IDE Extensions</b></a><a class="navbar__item navbar__link" href="/docs/category/cloud-native/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/java-1_8-compliance/">Dropping support of older Java releases in vscode-java</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/lsp4ij-announcement/">Meet LSP4IJ, a new LSP Client for JetBrains-based IDEs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/k8s-create-unprivileged-user/">Create a Test Kubernetes Cluster With an Unprivileged User</a></li></ul></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Meet LSP4IJ, a new LSP Client for JetBrains-based IDEs</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-06-20T00:00:00.000Z">June 20, 2024</time> · <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/angelozerr" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/angelozerr.png" alt="Angelo Zerr"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/angelozerr" target="_blank" rel="noopener noreferrer"><span>Angelo Zerr</span></a></div><small class="avatar__subtitle">Principal Software Engineer @ Red Hat</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/fbricon" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/fbricon.png" alt="Fred Bricon"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/fbricon" target="_blank" rel="noopener noreferrer"><span>Fred Bricon</span></a></div><small class="avatar__subtitle">Principal Software Engineer @ Red Hat</small></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p><a href="https://plugins.jetbrains.com/plugin/23257-lsp4ij" target="_blank" rel="noopener noreferrer">LSP4IJ</a> is a new, free and open-source Language Server Protocol (LSP) client for JetBrains-based IDEs, compatible with both <strong>community</strong> and enterprise flavors.</p>
<p>It provides outstanding features such as:</p>
<ul>
<li>The ability to <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/UserDefinedLanguageServer.md" target="_blank" rel="noopener noreferrer">configure LSP servers without developing a new plug-in</a> (restricted to stdio-based connections for the moment).</li>
<li>A <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/DeveloperGuide.md" target="_blank" rel="noopener noreferrer">set of API allowing third-party adopters to contribute LSP extensions</a> to the JetBrains ecosystem</li>
<li>a <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/UserGuide.md#lsp-console" target="_blank" rel="noopener noreferrer">console view</a>, allowing users to monitor and troubleshoot the communication between the IDE and the LSP servers.</li>
</ul>
<p>The client already supports a significant amount of <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/LSPSupport.md" target="_blank" rel="noopener noreferrer">features</a> from the LSP 3.17 specification, and more are on their way.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-lsp4ij">Why LSP4IJ?<a href="#why-lsp4ij" class="hash-link" aria-label="Direct link to Why LSP4IJ?" title="Direct link to Why LSP4IJ?">​</a></h2>
<p>The Devtools team at Red Hat has been working on free and open-source language servers for <em>many</em> years. We have offered LSP implementations for <a href="https://github.com/eclipse/eclipse.jdt.ls/" target="_blank" rel="noopener noreferrer">Java</a>, <a href="https://github.com/redhat-developer/yaml-language-server" target="_blank" rel="noopener noreferrer">YAML</a>, <a href="https://github.com/eclipse/lemminx" target="_blank" rel="noopener noreferrer">XML</a>, <a href="https://github.com/eclipse/lsp4mp" target="_blank" rel="noopener noreferrer">MicroProfile</a>, <a href="https://github.com/redhat-developer/quarkus-ls" target="_blank" rel="noopener noreferrer">Quarkus</a> and <a href="https://github.com/redhat-developer/quarkus-ls/tree/master/qute.ls" target="_blank" rel="noopener noreferrer">Qute</a>, that were integrated into Visual Studio Code via several extensions. Some of those language servers have also been integrated into Eclipse IDE.</p>
<p>By 2019, JetBrains already provided some <a href="https://quarkus.io/" target="_blank" rel="noopener noreferrer">Quarkus</a> support in IntelliJ IDEA Ultimate to their paid customers. But when Red Hat wanted to bring the same awesome <a href="https://marketplace.visualstudio.com/items?itemName=redhat.vscode-quarkus" target="_blank" rel="noopener noreferrer">Quarkus tools</a> VS Code already had, to the wider IntelliJ IDEA Community, an LSP client for IntelliJ was needed.</p>
<p>At that time, we evaluated <a href="https://github.com/ballerina-platform/lsp4intellij" target="_blank" rel="noopener noreferrer">Ballerina&#x27;s lsp4intellij library</a>, which provides advanced LSP support but has the following limitations:</p>
<ul>
<li>Quarkus / Qute language servers have a complicated mechanism, delegating parts of the work to the IDE&#x27;s Java support (JDT for Eclipse and Psi for IntelliJ), to avoid parsing Java classes twice (once by the language server, another the built-in Java support). We encountered numerous freezes.</li>
<li>Ballerina implements certain LSP features without reusing IntelliJ built-in extension points (ex: hover, go to declaration)</li>
<li>Tracing server status (starting, started, stopping, stopped) is difficult, which makes server startup issues hard to troubleshoot.</li>
<li>Ballerina features are mostly based on a Timeout system, which stops LSP requests after a defined time.</li>
</ul>
<p>To integrate our Quarkus and Qute language servers, the LSP support in IntelliJ needed to:</p>
<ul>
<li>never freeze, even when the language server cannot be started.</li>
<li>not rely on a timeout system, but instead properly manage LSP request cancellations (when the file is modified for example)</li>
<li>provide a UI allowing easy tracking of the state of the language servers</li>
<li>provide an LSP console that displays LSP traces and server logs.</li>
</ul>
<p>For these reasons, we developed the LSP support we needed directly within the <a href="https://github.com/redhat-developer/intellij-quarkus/" target="_blank" rel="noopener noreferrer"><code>Quarkus Tools for IntelliJ</code></a> plugin. It actually started as a port of the <a href="https://github.com/eclipse/lsp4e" target="_blank" rel="noopener noreferrer"><code>Eclipse LSP4E</code></a> project. It took us several years, but we ended up with an LSP support that was mature and efficient.</p>
<p>In 2023, JetBrains finally decided to <a href="https://blog.jetbrains.com/platform/2023/07/lsp-for-plugin-developers/" target="_blank" rel="noopener noreferrer">start providing some LSP support</a>, but to only make it available in their commercial products, which was a not a good fit for us as we couldn&#x27;t use it for <code>Quarkus Tools</code>. It was also lacking some features we really, really, liked in our LSP client, notably the LSP Consoles view.</p>
<p>Seeing our own LSP support held up pretty well for Quarkus and Qute, we decided to extract it into its own standalone project, to provide generic LSP support, for all JetBrains products, notably the community ones. Hence LSP4IJ was born.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lsp-support-overview">LSP support overview<a href="#lsp-support-overview" class="hash-link" aria-label="Direct link to LSP support overview" title="Direct link to LSP support overview">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lsp-features">LSP features<a href="#lsp-features" class="hash-link" aria-label="Direct link to LSP features" title="Direct link to LSP features">​</a></h3>
<p>LSP4IJ implements basic LSP features like <code>completion</code>, <code>validation</code>, <code>hover</code>, <code>go to definition</code>, but also more advanced ones, such as <code>codelens</code>, <code>inlay hints</code>, <code>quickfixes</code>, <code>rename</code>, <code>signature help</code> and others.</p>
<p>Here&#x27;s a quick example showcasing the <a href="https://pkg.go.dev/golang.org/x/tools/gopls" target="_blank" rel="noopener noreferrer"><code>gopls</code></a> language server in action:</p>
<p><img decoding="async" loading="lazy" alt="Go Demo" src="/assets/images/GoplsDemo-0826d5b88b165166d7cff2f0924eec49.gif" width="699" height="337" class="img_ev3q"></p>
<p>The <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/LSPSupport.md" target="_blank" rel="noopener noreferrer">LSP Support</a> page provides a complete overview of what LSP4IJ supports and details how it leverages specific IntelliJ extension points. While most features work out-of-the-box, a few <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/DeveloperGuide.md#special-cases" target="_blank" rel="noopener noreferrer">cases</a> require special configuration.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cancellation-support">Cancellation Support<a href="#cancellation-support" class="hash-link" aria-label="Direct link to Cancellation Support" title="Direct link to Cancellation Support">​</a></h4>
<p>In order to avoid using timeouts (that might still freeze the IDE), LSP4IJ implements <a href="https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#cancelRequest" target="_blank" rel="noopener noreferrer">Cancellation Support</a> to stop LSP requests when the file changes or when the IDE indicates the some requests (e.g. completion) are no longer relevant.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lsp-consoles-view">LSP consoles view<a href="#lsp-consoles-view" class="hash-link" aria-label="Direct link to LSP consoles view" title="Direct link to LSP consoles view">​</a></h3>
<p>Although not often useful to users, the <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/UserGuide.md#lsp-console" target="_blank" rel="noopener noreferrer">LSP consoles view</a> is extremely valuable when one needs to troubleshoot issues with the language servers. All servers can be configured to log traces, as simple or verbose messages. This console view is similar to Visual Studio Code&#x27;s Output view, only more convenient, as message contents are collapsible:</p>
<p><img decoding="async" loading="lazy" alt="LSP console" src="/assets/images/LSPConsole-494158253cd10f8b24dbd3e49a4421d4.png" width="1357" height="376" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<p>LSP4IJ requires at least Java 17 and IntelliJ-based IDEs 2023.2 at the moment.</p>
<p>The LSP4IJ plugin is available in the stable channel of the <a href="https://plugins.jetbrains.com/plugin/23257-lsp4ij" target="_blank" rel="noopener noreferrer">JetBrains Plugin Repository</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quickly-get-started-with-lsp4ij">Quickly get started with LSP4IJ<a href="#quickly-get-started-with-lsp4ij" class="hash-link" aria-label="Direct link to Quickly get started with LSP4IJ" title="Direct link to Quickly get started with LSP4IJ">​</a></h2>
<p>If you want to <em>quickly test your language server with LSP4IJ without having to develop a plugin</em> or <em>if you&#x27;re unfamiliar with IntelliJ plugin development</em>, LSP4IJ offers the possibility of integrating any language server (<strong>only stdio mode is supported at the moment</strong>) with <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/UserDefinedLanguageServer.md" target="_blank" rel="noopener noreferrer">simple settings</a> where you only need to define:</p>
<ul>
<li>the language server <code>launch command</code></li>
<li>the <code>mapping</code> between the <code>language server</code> and the <code>files</code> targeted by the language server</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-adding-typescript-support">Example: Adding TypeScript support<a href="#example-adding-typescript-support" class="hash-link" aria-label="Direct link to Example: Adding TypeScript support" title="Direct link to Example: Adding TypeScript support">​</a></h3>
<p>Free/community IntelliJ-based IDEs only provide basic support for <code>TypeScript</code> in the form of syntax highlighting. In this section, we&#x27;ll explain step-by-step how to integrate the <a href="https://github.com/typescript-language-server/typescript-language-server" target="_blank" rel="noopener noreferrer">TypeScript language server</a> into your IntelliJ IDE, without having to develop anything, and immediately benefit from <code>TypeScript</code>, <code>React</code> and <code>JavaScript</code> support (completion, validation, quickfixes, codelens, etc):</p>
<p><img decoding="async" loading="lazy" alt="TypeScriptServerDemo" src="/assets/images/TypeScriptServerDemo-cb555792bf6462f148dae6265e1466d4.gif" width="755" height="358" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-install-the-language-server">Step 1: Install the language server<a href="#step-1-install-the-language-server" class="hash-link" aria-label="Direct link to Step 1: Install the language server" title="Direct link to Step 1: Install the language server">​</a></h4>
<p>This step describes how to install the language server. In our case, <code>typescript-language-server</code> is <code>Node.js</code> application and thus requires the <code>Node.js</code> runtime to run.</p>
<p>You will need to:</p>
<ul>
<li><a href="https://nodejs.org/en/download" target="_blank" rel="noopener noreferrer">Install <code>Node.js</code></a></li>
<li><a href="https://github.com/typescript-language-server/typescript-language-server?tab=readme-ov-file#installing" target="_blank" rel="noopener noreferrer">Install <code>typescript-language-server</code></a>. The simplest way is to open a terminal and execute the following command:</li>
</ul>
<blockquote>
<p>npm install -g typescript-language-server typescript</p>
</blockquote>
<p>It will install:</p>
<ul>
<li><a href="https://github.com/typescript-language-server/typescript-language-server" target="_blank" rel="noopener noreferrer">TypeScript language server</a>: this project delegates the LSP operations (completion, diagnostics, etc) to the <code>tsserver</code> from <a href="https://github.com/microsoft/TypeScript" target="_blank" rel="noopener noreferrer">TypeScript</a> which doesn&#x27;t support LSP itself.</li>
<li><a href="https://github.com/microsoft/TypeScript" target="_blank" rel="noopener noreferrer">TypeScript</a> which includes <code>tsserver</code>.</li>
<li>As the command will add <code>typescript-language-server</code> to your OS PATH, you will probably have to close and reopen your IDE for the command to be accessible by LSP4IJ.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-create-a-language-server-in-lsp4ij">Step 2: Create a language server in LSP4IJ<a href="#step-2-create-a-language-server-in-lsp4ij" class="hash-link" aria-label="Direct link to Step 2: Create a language server in LSP4IJ" title="Direct link to Step 2: Create a language server in LSP4IJ">​</a></h4>
<p>In order to create a new <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/UserDefinedLanguageServer.md" target="_blank" rel="noopener noreferrer">User-defined language server</a>, you need to open the <code>New Language Server</code> dialog, either:</p>
<ul>
<li>from the menu on the right of the LSP console:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="New Language Server From Console" src="/assets/images/NewLanguageServerFromConsole-b82856f8cc14028e0fff03a198ca5697.png" width="873" height="348" class="img_ev3q"></p>
<ul>
<li>or with the <code>[+]</code> on the top of the language server settings:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="New Language Server From Settings" src="/assets/images/NewLanguageServerFromSettings-4fc2817a810b888ed97ef9cd31f25be5.png" width="564" height="455" class="img_ev3q"></p>
<p>Once you clicked on either of them, the dialog will appear:</p>
<p><img decoding="async" loading="lazy" alt="New Language Server Dialog" src="/assets/images/NewLanguageServerDialogEmpty-ef5aaebff2b14ab16d4471cdc443a4bc.png" width="798" height="542" class="img_ev3q"></p>
<p>To quickly configure TypeScript support, you could use the <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/user-defined-ls/typescript-language-server.md" target="_blank" rel="noopener noreferrer">TypeScript template</a> which will pre-fill all fields (command and mappings), but in order to better understand the process, let&#x27;s do that manually:</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="define-launch-command">Define launch command<a href="#define-launch-command" class="hash-link" aria-label="Direct link to Define launch command" title="Direct link to Define launch command">​</a></h5>
<p>In the <code>Server</code> tab, set:</p>
<ul>
<li><code>Name</code> as <code>TypeScript Language Server</code>.</li>
<li><code>Command</code> as <code>typescript-language-server --stdio</code></li>
</ul>
<p><img decoding="async" loading="lazy" alt="New Language Server Dialog with TypeScript" src="/assets/images/TypeScriptServerDialog-0a3292d16a8feb97fceaf0a93ff77f1a.png" width="807" height="536" class="img_ev3q"></p>
<p>Note that you can use <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/UserDefinedLanguageServer.md#macro-syntax" target="_blank" rel="noopener noreferrer">macros in your commands</a>, to make them more portable, should you choose to <a href="#Export-server">export you server</a>.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="define-mappings">Define mappings<a href="#define-mappings" class="hash-link" aria-label="Direct link to Define mappings" title="Direct link to Define mappings">​</a></h5>
<p>In the <code>Mappings &gt; File name patterns</code> tab, associate <code>*.ts</code>, <code>*.tsx</code>, <code>*.jsx</code> files to the language server as shown below :</p>
<table><thead><tr><th>File Name Pattern</th><th>Language Id</th></tr></thead><tbody><tr><td>*.jsx</td><td>javascriptreact</td></tr><tr><td>*.ts</td><td>typescript</td></tr><tr><td>*.tsx</td><td>typescriptreact</td></tr></tbody></table>
<p><img decoding="async" loading="lazy" alt="File name patterns" src="/assets/images/TypeScriptServerDialog_FileNamePatterns-e4be8703e9826aff8fbac9c64f54fc31.png" width="795" height="522" class="img_ev3q"></p>
<p>The value in the <code>Language Id</code> column must be one of the language identifiers defined in the <a href="https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#textDocumentItem" target="_blank" rel="noopener noreferrer">LSP specification</a>.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="define-configuration">Define configuration<a href="#define-configuration" class="hash-link" aria-label="Direct link to Define configuration" title="Direct link to Define configuration">​</a></h5>
<p>By default, <code>codelens</code> and <code>inlayhint</code> are not available in the TypeScript Language Server, you can enable them by filling the <code>Configuration</code> tab with the following JSON settings:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;typescript&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;inlayHints&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;includeInlayEnumMemberValueHints&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;includeInlayFunctionLikeReturnTypeHints&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;includeInlayFunctionParameterTypeHints&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;includeInlayParameterNameHints&quot;: &quot;all&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;includeInlayParameterNameHintsWhenArgumentMatchesName&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;includeInlayPropertyDeclarationTypeHints&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;includeInlayVariableTypeHints&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;includeInlayVariableTypeHintsWhenTypeMatchesName&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;implementationsCodeLens&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;enabled&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;referencesCodeLens&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;enabled&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;showOnAllFunctions&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="TypeScript Language Server configuration page" src="/assets/images/ts-ls-config-83a1510bd963052e7b535ff0b1f51b9b.png" width="805" height="559" class="img_ev3q"></p>
<p>Click the <code>OK</code> button, and you should see the <code>TypeScript Language Server</code> in the <code>Language Servers</code> view:</p>
<p><img decoding="async" loading="lazy" alt="TypeScript Language Server in the console view" src="/assets/images/ts-ls-traces-d1b9901e7325048494e700e8944be54b.png" width="1166" height="314" class="img_ev3q"></p>
<p>Create a <code>ts</code> file and open it. The <code>TypeScript Language Server</code> should start and you should now be able to use TypeScript support with completion, hover, linting...</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-a-template">Using a Template<a href="#using-a-template" class="hash-link" aria-label="Direct link to Using a Template" title="Direct link to Using a Template">​</a></h3>
<p>LSP4IJ provides <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/UserDefinedLanguageServer.md#using-template" target="_blank" rel="noopener noreferrer">a few templates</a> for various language servers. You can select the <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/user-defined-ls/typescript-language-server.md" target="_blank" rel="noopener noreferrer">TypeScript Language Server</a> template which will pre-fill all fields previously described (server name, command and mappings).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="export-server">Export server<a href="#export-server" class="hash-link" aria-label="Direct link to Export server" title="Direct link to Export server">​</a></h3>
<p>If you want to share your language server settings, you can <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/UserDefinedLanguageServer.md#exporting-templates" target="_blank" rel="noopener noreferrer">export it</a> to generate a zip file, that, once shared and unzipped to a directory, can be <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/UserDefinedLanguageServer.md#custom-template" target="_blank" rel="noopener noreferrer">imported</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-integrate-your-language-server-in-an-intellij-plugin">How to integrate your language server in an IntelliJ plugin.<a href="#how-to-integrate-your-language-server-in-an-intellij-plugin" class="hash-link" aria-label="Direct link to How to integrate your language server in an IntelliJ plugin." title="Direct link to How to integrate your language server in an IntelliJ plugin.">​</a></h2>
<p>Manually defining a language server via settings allows you to add a language server into IntelliJ in a few minutes, but if you need to provide better integration with the IDE, embedding the language server definition in an IntelliJ plugin will be a better solution:</p>
<ul>
<li>it is possible to embed the language server and/or provide a mechanism to download/update the language server, etc. make it easier for users to get started.</li>
<li>advanced language servers require implementing specific client-side commands, which is only possible through the development of an IntelliJ plugin.</li>
</ul>
<p>The <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/DeveloperGuide.md" target="_blank" rel="noopener noreferrer">Developer Guide</a>  provides step-by-step instructions for contributing an LSP language server in your IntelliJ plugin.</p>
<p>The following example shows how to integrate the <code>TypeScript Language Server</code> in an IntelliJ plugin. In your plugin.xml, you would declare the server like this:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">extensions</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">defaultExtensionNs</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.redhat.devtools.lsp4ij</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">server</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">typeScriptLanguageServerId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">            </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">TypeScript Language Server</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">            </span><span class="token tag attr-name" style="color:#00a4db">factoryClass</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.yourplugin.lsp.TypeScriptLanguageServerFactory</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">description</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token cdata" style="color:#999988;font-style:italic">&lt;![CDATA[</span><br></span><span class="token-line" style="color:#393A34"><span class="token cdata" style="color:#999988;font-style:italic">        Some description written in HTML, that will be displayed in the LSP consoles view and Language Servers settings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token cdata" style="color:#999988;font-style:italic">        ]]&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">description</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">server</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">extensions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and mappings like this by using <a href="https://github.com/redhat-developer/lsp4ij/blob/main/docs/DeveloperGuide.md#file-name-pattern-mapping" target="_blank" rel="noopener noreferrer">File name pattern mapping</a>:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">extensions</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">defaultExtensionNs</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">com.redhat.devtools.lsp4ij</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">fileNamePatternMapping</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">patterns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">*.ts</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                            </span><span class="token tag attr-name" style="color:#00a4db">serverId</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">typeScriptLanguageServerId</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">                            </span><span class="token tag attr-name" style="color:#00a4db">languageId</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">typescript</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">extensions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>com.yourplugin.lsp.TypeScriptLanguageServerFactory</code> factory class looks like this:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.yourplugin.lsp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.intellij.openapi.project.Project;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.redhat.devtools.lsp4ij.LanguageServerFactory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.redhat.devtools.lsp4ij.client.LanguageClientImpl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.redhat.devtools.lsp4ij.server.StreamConnectionProvider;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.jetbrains.annotations.NotNull;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TypeScriptLanguageServerFactory implements LanguageServerFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public @NotNull StreamConnectionProvider createConnectionProvider(@NotNull Project project) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new TypeScriptLanguageServer(project);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.yourplugin.lsp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.redhat.devtools.lsp4ij.server.ProcessStreamConnectionProvider;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TypeScriptLanguageServer extends ProcessStreamConnectionProvider {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MyLanguageServer() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;String&gt; commands = List.of(&quot;typescript-language-server&quot;, &quot;--stdio&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.setCommands(commands);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This code assumes <code>typescript-language-server</code> is available on the PATH, but it could be improved to target an embedded TypeScript language server inside your IntelliJ plugin.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>This article only scratches the surface of what <code>LSP4IJ</code> provides. You can find more documentation in:</p>
<ul>
<li><a href="https://github.com/redhat-developer/lsp4ij/tree/main/docs/UserGuide.md" target="_blank" rel="noopener noreferrer">the user guide</a>, describing how to use the LSP consoles view and Language Server preferences.</li>
<li><a href="https://github.com/redhat-developer/lsp4ij/tree/main/docs/LSPSupport.md" target="_blank" rel="noopener noreferrer">the LSP Support overview</a>, detailing which LSP features are implemented, and how.</li>
<li><a href="https://github.com/redhat-developer/lsp4ij/tree/main/docs/UserDefinedLanguageServer.md" target="_blank" rel="noopener noreferrer">the User-defined language server documentation</a>, explaining how to integrate a language server in LSP4IJ with minimal settings.</li>
<li><a href="https://github.com/redhat-developer/lsp4ij/tree/main/docs/DeveloperGuide.md" target="_blank" rel="noopener noreferrer">the developer guide</a>, providing step-by-step instructions on how to integrate a language server in LSP4IJ in an external IntelliJ plugin.</li>
</ul>
<p>Creating a new LSP client for JetBrains-based IDEs has been a very humbling and rewarding experience. With each new language server we tested, we found slightly different behaviors to account for, eventually making LSP4IJ more and more robust.
The initial feedback from the community has been very encouraging so far. We hope you will find LSP4IJ useful!</p>
<p>If you find any bugs or can think of ideas for some great new features, please don’t hesitate to head over to our Github repository and <a href="https://github.com/redhat-developer/lsp4ij/issues" target="_blank" rel="noopener noreferrer">open a ticket</a>. Since our test framework is built around <a href="https://github.com/redhat-developer/lsp4ij/blob/main/src/test/java/com/redhat/devtools/lsp4ij/features/completion/GoCompletionTest.java" target="_blank" rel="noopener noreferrer">LSP requests</a>, you just need to copy traces from the LSP Consoles view so we can reproduce issues you find with your language server and fix them.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/lsp/">lsp</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/intellij/">intellij</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/lsp-4-ij/">lsp4ij</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/java-1_8-compliance/"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Dropping support of older Java releases in vscode-java</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/k8s-create-unprivileged-user/"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Create a Test Kubernetes Cluster With an Unprivileged User</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-lsp4ij" class="table-of-contents__link toc-highlight">Why LSP4IJ?</a></li><li><a href="#lsp-support-overview" class="table-of-contents__link toc-highlight">LSP support overview</a><ul><li><a href="#lsp-features" class="table-of-contents__link toc-highlight">LSP features</a></li><li><a href="#lsp-consoles-view" class="table-of-contents__link toc-highlight">LSP consoles view</a></li></ul></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#quickly-get-started-with-lsp4ij" class="table-of-contents__link toc-highlight">Quickly get started with LSP4IJ</a><ul><li><a href="#example-adding-typescript-support" class="table-of-contents__link toc-highlight">Example: Adding TypeScript support</a></li><li><a href="#using-a-template" class="table-of-contents__link toc-highlight">Using a Template</a></li><li><a href="#export-server" class="table-of-contents__link toc-highlight">Export server</a></li></ul></li><li><a href="#how-to-integrate-your-language-server-in-an-intellij-plugin" class="table-of-contents__link toc-highlight">How to integrate your language server in an IntelliJ plugin.</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Red Hat Inc.</div></div></div></footer></div>
</body>
</html>